# FSM-based Consecutive Bit Pattern Detector - BASYS-3 FPGA

BASYS-3 보드를 이용한 유한 상태 머신 기반 연속 비트 패턴 검출 프로젝트

## 프로젝트 개요

Xilinx BASYS-3 FPGA 보드와 Vivado를 사용하여 구현한 3상태 FSM 기반 패턴 검출 시스템입니다. 연속된 "00"과 "11" 비트 패턴을 실시간으로 검출하고 LED로 결과를 표시합니다.

## 주요 기능

### 패턴 검출
- **검출 패턴**: "00" (연속된 두 개의 0), "11" (연속된 두 개의 1)
- **FSM 기반**: 3상태 유한 상태 머신으로 효율적인 패턴 인식
- **실시간 검출**: 입력과 동시에 패턴 검출 및 표시

### 상태 머신 구조
- **IDLE**: 초기 상태 (입력 대기)
- **STATE_0**: 이전에 '0'을 받은 상태
- **STATE_1**: 이전에 '1'을 받은 상태

### 사용자 인터페이스
- **버튼 입력**: btn[0]으로 '0' 입력, btn[2]로 '1' 입력
- **LED 표시**: 검출 결과 및 입력 히스토리 실시간 표시
- **래치 기능**: 검출된 패턴을 사용자가 확인할 때까지 유지

## 사용법

### 버튼 기능
- **btn[0]**: '0' 데이터 입력
- **btn[2]**: '1' 데이터 입력
- **reset**: 시스템 전체 리셋

### LED 출력
- **LED[15]**: "00" 패턴 검출 시 점등 (래치됨)
- **LED[14]**: "11" 패턴 검출 시 점등 (래치됨)
- **LED[13:7]**: 사용 안함 (꺼짐)
- **LED[6:0]**: 입력 히스토리 (7비트 시프트 레지스터)

### 패턴 검출 예시

#### "00" 패턴 검출:
1. btn[0] 눌러서 '0' 입력 → STATE_0으로 이동
2. btn[0] 다시 눌러서 '0' 입력 → "00" 검출! LED[15] 점등

#### "11" 패턴 검출:
1. btn[2] 눌러서 '1' 입력 → STATE_1으로 이동  
2. btn[2] 다시 눌러서 '1' 입력 → "11" 검출! LED[14] 점등

## 시스템 구조

```
top (최상위 모듈)
├── consecutive_bit_detector_fsm - FSM 기반 패턴 검출기
│   ├── 3상태 FSM (IDLE, STATE_0, STATE_1)
│   ├── 상태 전이 로직
│   └── 패턴 검출 로직 (00, 11)
├── button_debounce.v (×2) - 버튼 디바운싱
│   ├── btn[0] 디바운싱 (10ms)
│   └── btn[2] 디바운싱 (10ms)
└── 래치 및 시프트 레지스터 로직
    ├── 검출 결과 래치 (detected_00_latch, detected_11_latch)
    └── 7비트 입력 히스토리 (shift_reg)
```

## 핵심 알고리즘

### FSM 상태 전이도
```
     [0]      [0]
IDLE ---> STATE_0 <---
 |           |     [0] (00 검출!)
 |[1]        |[1]
 v           v
STATE_1 <---------
 ^    [1]    
 |   (11 검출!)
 +----[1]
```

### 상태 전이 로직
- **IDLE + 0 입력**: STATE_0으로 이동
- **IDLE + 1 입력**: STATE_1으로 이동
- **STATE_0 + 0 입력**: STATE_0 유지, "00" 패턴 검출
- **STATE_0 + 1 입력**: STATE_1으로 이동
- **STATE_1 + 0 입력**: STATE_0으로 이동
- **STATE_1 + 1 입력**: STATE_1 유지, "11" 패턴 검출

## 동작 원리

### 패턴 검출 과정
1. **입력 대기**: IDLE 상태에서 버튼 입력 대기
2. **상태 추적**: 마지막 입력에 따라 STATE_0 또는 STATE_1으로 이동
3. **패턴 매칭**: 현재 상태와 새 입력이 연속 패턴을 만족하는지 확인
4. **검출 신호**: 패턴 발견 시 1클럭 동안 검출 신호 활성화
5. **래치 보존**: 검출 결과를 래치에 저장하여 지속적으로 표시

### 래치 메커니즘
- 새로운 입력이 있을 때마다 래치 초기화
- 패턴 검출 시 해당 래치 설정
- 사용자가 시각적으로 확인할 수 있도록 LED 점등 유지

## 빌드 및 실행

### 필요 환경
- **FPGA 보드**: Xilinx BASYS-3
- **개발 도구**: Vivado Design Suite
- **언어**: Verilog HDL

### 필요한 파일
- `top.v`: 최상위 모듈 (FSM 패턴 검출기)
- `button_debounce.v`: 버튼 디바운싱 모듈

### 실행 단계
1. Vivado에서 새 프로젝트 생성
2. `top.v`와 `button_debounce.v` 파일을 프로젝트에 추가
3. `top`을 최상위 모듈로 설정
4. BASYS-3 제약 파일(.xdc) 추가
5. Synthesis → Implementation → Generate Bitstream
6. BASYS-3 보드에 프로그래밍

## 리소스 사용량

- **클럭 도메인**: 100MHz 메인 클럭
- **FSM 상태**: 2비트 상태 레지스터
- **시프트 레지스터**: 7비트 입력 히스토리
- **래치**: 2비트 검출 결과 저장
- **카운터**: 디바운싱용 20비트 카운터 (×2)
- **I/O 핀**: 버튼 3개, 리셋 1개, LED 16개

## 특징

- **효율적인 FSM**: 3상태만으로 연속 패턴 검출
- **래치 메커니즘**: 검출 결과를 놓치지 않도록 보존
- **입력 히스토리**: 7비트 시프트 레지스터로 입력 추적
- **실시간 피드백**: LED로 즉시 검출 결과 확인
- **안정적인 입력**: 10ms 디바운싱으로 깨끗한 버튼 처리

## 교육적 가치

- **FSM 설계**: 유한 상태 머신의 실제 구현 학습
- **패턴 인식**: 순차 논리를 이용한 패턴 매칭 이해
- **디지털 설계**: 동기 회로 설계 원리 습득
- **상태 관리**: 복잡한 시스템의 상태 제어 방법 학습

## 응용 분야

- **통신 프로토콜**: 시작/종료 비트 패턴 검출
- **데이터 검증**: 연속된 오류 비트 감지
- **보안 시스템**: 특정 시퀀스 패턴 인증
- **신호 처리**: 디지털 신호의 특정 패턴 분석

---
**개발 환경**: Xilinx Vivado | **타겟 보드**: BASYS-3 | **언어**: Verilog HDL